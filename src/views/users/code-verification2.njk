{% extends "../layouts/main.njk" %}

{% block header_tags %}
    <link rel="stylesheet" href="/assets/css/intlTelInput.css"/>
{% endblock header_tags %}

{% block main %}
    <main class="page hire-me-page">
        <section class="portfolio-block hire-me" style="padding-top: 30px;">
            <div class="container">
                <div class="heading" style="margin-bottom: 40px;">
                    <h2 style="margin-bottom: 20px;">mobile phone verification</h2>
                    <div>
                        <div>
                            <div>
                                <div class="d-xl-flex justify-content-xl-center">
                                    <p class="text-left" style="
                        padding-left: 15px;
                        padding-right: 15px;
                        margin-bottom: 20px;
                      ">
                                        <span class="mobile-phone-number-paragraph-text">Verification code sent!</span >&nbsp;Most carriers deliver the verification code within 10 seconds. If you do not receive the code within five minutes, please&nbsp;
                                        <a href="#">try again</a>&nbsp;or contact&nbsp;<a href="#">support@imagenius.com</a >&nbsp;for assistance. Once you've received the verification code, please enter it below and click validate.
                                    </p>
                                </div>
                            </div>
                            <div class="d-flex justify-content-center align-items-center justify-content-xl-center">
                                <div>
                                    <div>
                                        <p class="mobile-phone-number-text" style="padding-left: 0px; margin-bottom: 5px;">
                                            Verification Code
                                        </p>
                                    </div>
                                    <div style="margin-bottom: 10px;">
                                        <input type="tel" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" class="mobile-phone-number-input-text" id="phone" name="phoneNumber" autofocus="" inputmode="numeric" required="" maxlength="11" minlength="7" style="
                          margin-bottom: 20px;
                          padding-left: 50px;
                          padding-right: 5px;
                        "/>
                                    </div>
                                    <div>
                                        <button class="btn btn-sm mobile-phone-number-button" type="submit" style="padding-top: 3px; padding-bottom: 3px;">
                                            Validate
                                        </button>
                                        <button class="btn btn-sm mobile-phone-number-button-send-new-code" type="button" style="
                          padding-top: 3px;
                          padding-bottom: 3px;
                          padding-left: 15px;
                          padding-right: 0px;
                        ">
                                            Send new code
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
{% endblock main %}

{% block scripts %}
    <!-- load input validator -->
    <script src="/assets/js/validator.js"></script>
    <!-- jQuery library for flags -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- load flag intlTelInput plugin -->
    <script src="/assets/js/intlTelInput.js"></script>
    <!-- script that gets the contry code -->
    <script>
        let input = document.querySelector("#phone");
        console.log(input);
        intlTelInput(input, {
            initialCountry: "auto",
            geoIpLookup: function (callback) {
                $
                    .get(`http://api.ipstack.com/check?access_key=91035ff3ffcf26ea71504900af50d7d4`, function () {}, "jsonp")
                    .always(function (resp) {
                        console.log("RESP:", resp);
                        var countryCode = resp && resp.country_code
                            ? resp.country_code
                            : "";
                        callback(countryCode);
                    });
            },
            utilsScript: "/assets/js/utils.js"
        });
    </script>
{% endblock scripts %}